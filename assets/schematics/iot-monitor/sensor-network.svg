<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600" width="900" height="600" style="background-color: white;">
  <style>
    .wire { stroke: #000; stroke-width: 2; fill: none; stroke-linecap: round; stroke-linejoin: round; }
    .wireless { stroke: #000; stroke-width: 1.5; fill: none; stroke-dasharray: 5,3; }
    .symbol { stroke: #000; stroke-width: 2; fill: none; stroke-linecap: round; stroke-linejoin: round; }
    .symbol-filled { stroke: #000; stroke-width: 2; fill: #000; }
    .connection-dot { fill: #000; stroke: none; }
    .title-text { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #000; }
    .comp-name { font-family: Arial, sans-serif; font-size: 12px; font-weight: bold; fill: #000; }
    .comp-value { font-family: Arial, sans-serif; font-size: 10px; fill: #000; }
    .node-label { font-family: Courier New, monospace; font-size: 9px; fill: #444; }
    .sensor-block { stroke: #000; stroke-width: 2; fill: #e8f4e8; }
    .gateway-block { stroke: #000; stroke-width: 2; fill: #e8e8f4; }
    .cloud-block { stroke: #000; stroke-width: 2; fill: #f4e8e8; }
    .arrow { stroke: #000; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
  </style>
  
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="black"/>
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="40" y="35" class="title-text">Sensor Network Topology</text>
  <line x1="40" y1="42" x2="280" y2="42" class="wire"/>
  
  <!-- Sensor Node 1 -->
  <g transform="translate(120, 150)">
    <rect x="-70" y="-50" width="140" height="100" class="sensor-block"/>
    
    <!-- Antenna symbol -->
    <line x1="0" y1="-50" x2="0" y2="-70" class="wire"/>
    <line x1="-10" y1="-70" x2="10" y2="-70" class="wire"/>
    <line x1="-5" y1="-75" x2="5" y2="-75" class="wire"/>
    
    <text x="0" y="-25" text-anchor="middle" class="comp-name">Sensor Node 1</text>
    <text x="0" y="-5" text-anchor="middle" class="comp-value">ESP32</text>
    <text x="0" y="10" text-anchor="middle" class="comp-value">DHT22 + BMP280</text>
    <text x="0" y="25" text-anchor="middle" class="comp-value">Soil Moisture</text>
    
    <text x="0" y="65" text-anchor="middle" class="node-label">ID: ENV_001</text>
  </g>
  
  <!-- Sensor Node 2 -->
  <g transform="translate(120, 320)">
    <rect x="-70" y="-50" width="140" height="100" class="sensor-block"/>
    
    <!-- Antenna symbol -->
    <line x1="0" y1="-50" x2="0" y2="-70" class="wire"/>
    <line x1="-10" y1="-70" x2="10" y2="-70" class="wire"/>
    <line x1="-5" y1="-75" x2="5" y2="-75" class="wire"/>
    
    <text x="0" y="-25" text-anchor="middle" class="comp-name">Sensor Node 2</text>
    <text x="0" y="-5" text-anchor="middle" class="comp-value">ESP32</text>
    <text x="0" y="10" text-anchor="middle" class="comp-value">Rain + Wind</text>
    <text x="0" y="25" text-anchor="middle" class="comp-value">Light Sensor</text>
    
    <text x="0" y="65" text-anchor="middle" class="node-label">ID: ENV_002</text>
  </g>
  
  <!-- Sensor Node 3 -->
  <g transform="translate(120, 490)">
    <rect x="-70" y="-50" width="140" height="100" class="sensor-block"/>
    
    <!-- Antenna symbol -->
    <line x1="0" y1="-50" x2="0" y2="-70" class="wire"/>
    <line x1="-10" y1="-70" x2="10" y2="-70" class="wire"/>
    <line x1="-5" y1="-75" x2="5" y2="-75" class="wire"/>
    
    <text x="0" y="-25" text-anchor="middle" class="comp-name">Sensor Node 3</text>
    <text x="0" y="-5" text-anchor="middle" class="comp-value">ESP32</text>
    <text x="0" y="10" text-anchor="middle" class="comp-value">Temperature</text>
    <text x="0" y="25" text-anchor="middle" class="comp-value">Humidity</text>
    
    <text x="0" y="65" text-anchor="middle" class="node-label">ID: ENV_003</text>
  </g>
  
  <!-- WiFi Connections to Gateway -->
  <line x1="190" y1="150" x2="350" y2="250" class="wireless"/>
  <line x1="190" y1="320" x2="350" y2="280" class="wireless"/>
  <line x1="190" y1="490" x2="350" y2="310" class="wireless"/>
  
  <!-- WiFi labels -->
  <text x="250" y="180" class="node-label" transform="rotate(-20, 250, 180)">WiFi 2.4GHz</text>
  <text x="260" y="305" class="node-label">WiFi 2.4GHz</text>
  <text x="250" y="420" class="node-label" transform="rotate(20, 250, 420)">WiFi 2.4GHz</text>
  
  <!-- Gateway/Router -->
  <g transform="translate(420, 280)">
    <rect x="-60" y="-60" width="120" height="120" class="gateway-block"/>
    
    <!-- Router symbol -->
    <line x1="0" y1="-60" x2="0" y2="-85" class="wire"/>
    <line x1="-15" y1="-85" x2="15" y2="-85" class="wire"/>
    <line x1="-10" y1="-90" x2="10" y2="-90" class="wire"/>
    <line x1="-5" y1="-95" x2="5" y2="-95" class="wire"/>
    
    <text x="0" y="-35" text-anchor="middle" class="comp-name">WiFi Gateway</text>
    <text x="0" y="-15" text-anchor="middle" class="comp-value">Router/AP</text>
    <text x="0" y="5" text-anchor="middle" class="comp-value">DHCP Server</text>
    <text x="0" y="25" text-anchor="middle" class="comp-value">NAT/Firewall</text>
    
    <text x="0" y="75" text-anchor="middle" class="node-label">192.168.1.1</text>
  </g>
  
  <!-- Internet Connection -->
  <line x1="480" y1="280" x2="560" y2="280" class="arrow"/>
  <text x="520" y="270" text-anchor="middle" class="node-label">Internet</text>
  
  <!-- Cloud/MQTT Broker -->
  <g transform="translate(650, 280)">
    <!-- Cloud shape -->
    <ellipse cx="0" cy="0" rx="80" ry="50" class="cloud-block"/>
    <ellipse cx="-50" cy="10" rx="35" ry="25" class="cloud-block"/>
    <ellipse cx="50" cy="10" rx="35" ry="25" class="cloud-block"/>
    <ellipse cx="0" cy="25" rx="45" ry="30" class="cloud-block"/>
    
    <text x="0" y="-15" text-anchor="middle" class="comp-name">MQTT Broker</text>
    <text x="0" y="5" text-anchor="middle" class="comp-value">mosquitto</text>
    <text x="0" y="20" text-anchor="middle" class="comp-value">:1883</text>
    
    <text x="0" y="70" text-anchor="middle" class="node-label">broker.example.com</text>
  </g>
  
  <!-- To Client Apps -->
  <line x1="730" y1="280" x2="810" y2="200" class="arrow"/>
  <line x1="730" y1="280" x2="810" y2="280" class="arrow"/>
  <line x1="730" y1="280" x2="810" y2="360" class="arrow"/>
  
  <!-- Client Devices -->
  <g transform="translate(850, 200)">
    <rect x="-30" y="-25" width="60" height="50" class="symbol"/>
    <text x="0" y="5" text-anchor="middle" class="comp-value">Web</text>
    <text x="0" y="40" text-anchor="middle" class="node-label">Dashboard</text>
  </g>
  
  <g transform="translate(850, 280)">
    <rect x="-30" y="-25" width="60" height="50" class="symbol"/>
    <text x="0" y="5" text-anchor="middle" class="comp-value">Mobile</text>
    <text x="0" y="40" text-anchor="middle" class="node-label">App</text>
  </g>
  
  <g transform="translate(850, 360)">
    <rect x="-30" y="-25" width="60" height="50" class="symbol"/>
    <text x="0" y="5" text-anchor="middle" class="comp-value">Backend</text>
    <text x="0" y="40" text-anchor="middle" class="node-label">Server</text>
  </g>
  
  <!-- Protocol Stack Legend -->
  <g transform="translate(400, 480)">
    <text x="0" y="0" text-anchor="middle" class="comp-name">Communication Protocol Stack</text>
    
    <rect x="-180" y="15" width="100" height="30" class="sensor-block"/>
    <text x="-130" y="35" text-anchor="middle" class="comp-value">Sensors</text>
    
    <rect x="-70" y="15" width="100" height="30" class="gateway-block"/>
    <text x="-20" y="35" text-anchor="middle" class="comp-value">WiFi/TCP-IP</text>
    
    <rect x="40" y="15" width="100" height="30" class="cloud-block"/>
    <text x="90" y="35" text-anchor="middle" class="comp-value">MQTT/TLS</text>
    
    <line x1="-80" y1="30" x2="-70" y2="30" class="arrow"/>
    <line x1="30" y1="30" x2="40" y2="30" class="arrow"/>
  </g>
  
  <!-- Data Flow Rates -->
  <g transform="translate(40, 560)">
    <text x="0" y="0" class="comp-value">Data Rate: 1 reading/30s per sensor | Transmission: 5 min aggregates | Bandwidth: ~1KB/transmission</text>
  </g>
  
  <!-- Legend -->
  <g transform="translate(600, 560)">
    <line x1="0" y1="-5" x2="30" y2="-5" class="wireless"/>
    <text x="35" y="0" class="comp-value">Wireless</text>
    
    <line x1="100" y1="-5" x2="130" y2="-5" class="wire"/>
    <text x="135" y="0" class="comp-value">Wired</text>
  </g>
</svg>