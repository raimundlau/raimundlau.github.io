<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500" width="800" height="500" style="background-color: white;">
  <style>
    .wire { stroke: #000; stroke-width: 2; fill: none; stroke-linecap: round; stroke-linejoin: round; }
    .symbol { stroke: #000; stroke-width: 2; fill: none; stroke-linecap: round; stroke-linejoin: round; }
    .symbol-filled { stroke: #000; stroke-width: 2; fill: #000; }
    .connection-dot { fill: #000; stroke: none; }
    .title-text { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #000; }
    .comp-name { font-family: Arial, sans-serif; font-size: 12px; font-weight: bold; fill: #000; }
    .comp-value { font-family: Arial, sans-serif; font-size: 11px; fill: #000; }
    .node-label { font-family: Courier New, monospace; font-size: 10px; fill: #444; }
    .block { stroke: #000; stroke-width: 2; fill: #f8f8f8; }
    .camera-block { stroke: #000; stroke-width: 2; fill: #e8e8ff; }
    .arrow { stroke: #000; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
  </style>
  
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="black"/>
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="40" y="35" class="title-text">Vision Module - Camera &amp; Processing</text>
  <line x1="40" y1="42" x2="380" y2="42" class="wire"/>
  
  <!-- USB Camera -->
  <g transform="translate(120, 150)">
    <rect x="-50" y="-35" width="100" height="70" class="camera-block"/>
    <circle cx="0" cy="-5" r="25" class="symbol"/>
    <circle cx="0" cy="-5" r="15" class="symbol"/>
    <circle cx="0" cy="-5" r="5" class="symbol-filled"/>
    <text x="0" y="45" text-anchor="middle" class="comp-name">USB Camera</text>
    <text x="0" y="60" text-anchor="middle" class="comp-value">1080p 30fps</text>
  </g>
  
  <!-- USB Connection -->
  <line x1="170" y1="150" x2="270" y2="150" class="arrow"/>
  <text x="220" y="140" text-anchor="middle" class="node-label">USB 3.0</text>
  
  <!-- Raspberry Pi -->
  <g transform="translate(370, 150)">
    <rect x="-80" y="-50" width="160" height="100" class="block"/>
    <text x="0" y="-25" text-anchor="middle" class="comp-name">Raspberry Pi 4B</text>
    <text x="0" y="-5" text-anchor="middle" class="comp-value">4GB RAM</text>
    <text x="0" y="15" text-anchor="middle" class="comp-value">OpenCV + YOLO</text>
    <text x="0" y="35" text-anchor="middle" class="comp-value">Python Vision Stack</text>
  </g>
  
  <!-- UART/I2C to Arduino -->
  <line x1="450" y1="150" x2="550" y2="150" class="arrow"/>
  <text x="500" y="140" text-anchor="middle" class="node-label">UART 115200</text>
  
  <!-- Arduino -->
  <g transform="translate(650, 150)">
    <rect x="-80" y="-50" width="160" height="100" class="block"/>
    <text x="0" y="-25" text-anchor="middle" class="comp-name">Arduino Mega</text>
    <text x="0" y="-5" text-anchor="middle" class="comp-value">Servo Control</text>
    <text x="0" y="15" text-anchor="middle" class="comp-value">PCA9685 Driver</text>
    <text x="0" y="35" text-anchor="middle" class="comp-value">6x PWM Outputs</text>
  </g>
  
  <!-- Vision Processing Pipeline -->
  <g transform="translate(370, 320)">
    <text x="0" y="-40" text-anchor="middle" class="comp-name">Vision Processing Pipeline</text>
    
    <!-- Capture -->
    <rect x="-200" y="-20" width="80" height="40" class="block"/>
    <text x="-160" y="5" text-anchor="middle" class="comp-value">Capture</text>
    
    <!-- Arrow -->
    <line x1="-120" y1="0" x2="-100" y2="0" class="arrow"/>
    
    <!-- Detect -->
    <rect x="-100" y="-20" width="80" height="40" class="block"/>
    <text x="-60" y="5" text-anchor="middle" class="comp-value">YOLO</text>
    
    <!-- Arrow -->
    <line x1="-20" y1="0" x2="0" y2="0" class="arrow"/>
    
    <!-- Track -->
    <rect x="0" y="-20" width="80" height="40" class="block"/>
    <text x="40" y="5" text-anchor="middle" class="comp-value">3D Pose</text>
    
    <!-- Arrow -->
    <line x1="80" y1="0" x2="100" y2="0" class="arrow"/>
    
    <!-- Command -->
    <rect x="100" y="-20" width="80" height="40" class="block"/>
    <text x="140" y="5" text-anchor="middle" class="comp-value">Command</text>
  </g>
  
  <!-- Data Flow Labels -->
  <g transform="translate(370, 390)">
    <text x="-160" y="0" text-anchor="middle" class="node-label">30 FPS</text>
    <text x="-60" y="0" text-anchor="middle" class="node-label">~25ms</text>
    <text x="40" y="0" text-anchor="middle" class="node-label">x,y,z</text>
    <text x="140" y="0" text-anchor="middle" class="node-label">θ1-θ6</text>
  </g>
  
  <!-- Calibration Reference -->
  <g transform="translate(120, 350)">
    <rect x="-60" y="-25" width="120" height="50" class="block"/>
    <text x="0" y="-5" text-anchor="middle" class="comp-name">Camera Matrix</text>
    <text x="0" y="15" text-anchor="middle" class="comp-value">fx, fy, cx, cy</text>
    <line x1="60" y1="0" x2="150" y2="0" class="arrow"/>
  </g>
  
  <!-- Servo Outputs -->
  <g transform="translate(650, 280)">
    <text x="0" y="-10" text-anchor="middle" class="comp-name">To Servos</text>
    <line x1="0" y1="0" x2="0" y2="30" class="wire"/>
    
    <!-- 6 output lines -->
    <line x1="-50" y1="30" x2="50" y2="30" class="wire"/>
    <line x1="-50" y1="30" x2="-50" y2="50" class="wire"/>
    <line x1="-30" y1="30" x2="-30" y2="50" class="wire"/>
    <line x1="-10" y1="30" x2="-10" y2="50" class="wire"/>
    <line x1="10" y1="30" x2="10" y2="50" class="wire"/>
    <line x1="30" y1="30" x2="30" y2="50" class="wire"/>
    <line x1="50" y1="30" x2="50" y2="50" class="wire"/>
    
    <text x="-50" y="65" text-anchor="middle" class="node-label">S1</text>
    <text x="-30" y="65" text-anchor="middle" class="node-label">S2</text>
    <text x="-10" y="65" text-anchor="middle" class="node-label">S3</text>
    <text x="10" y="65" text-anchor="middle" class="node-label">S4</text>
    <text x="30" y="65" text-anchor="middle" class="node-label">S5</text>
    <text x="50" y="65" text-anchor="middle" class="node-label">S6</text>
  </g>
  
  <!-- Power Distribution -->
  <g transform="translate(400, 450)">
    <line x1="-350" y1="0" x2="350" y2="0" class="wire" stroke-width="3"/>
    <text x="-330" y="20" class="node-label">+5V Rail (Logic) ───────────────────── GND</text>
  </g>
  
  <!-- Legend -->
  <g transform="translate(40, 480)">
    <text x="0" y="0" class="comp-value">Vision System: USB Camera → Raspberry Pi (YOLO Detection) → Arduino Mega → 6x Servo Motors</text>
  </g>
</svg>